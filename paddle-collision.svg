<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 600">
  <!-- Background and Grid -->
  <defs>
    <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
      <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#f0f0f0" stroke-width="0.5"/>
    </pattern>
    <!-- NAND Gate Symbol -->
    <symbol id="nand" viewBox="0 0 40 40">
      <path d="M 5 0 L 5 40 Q 35 20 5 0" fill="white" stroke="black"/>
      <circle cx="35" cy="20" r="5" fill="white" stroke="black"/>
    </symbol>
    <!-- Flip-Flop Symbol -->
    <symbol id="flipflop" viewBox="0 0 60 80">
      <rect x="0" y="0" width="60" height="80" fill="white" stroke="black"/>
      <text x="30" y="45" text-anchor="middle" font-size="12">FF</text>
    </symbol>
  </defs>
  <rect width="1000" height="600" fill="url(#grid)"/>

  <!-- Left Paddle Collision Circuit -->
  <g transform="translate(100,100)">
    <!-- E2 NAND -->
    <use href="#nand" width="60" height="60"/>
    <text x="30" y="85" text-anchor="middle" font-family="monospace" font-size="14">E2</text>
    <text x="30" y="100" text-anchor="middle" font-family="monospace" font-size="12">7400</text>
    
    <!-- E3 NAND -->
    <g transform="translate(100,0)">
      <use href="#nand" width="60" height="60"/>
      <text x="30" y="85" text-anchor="middle" font-family="monospace" font-size="14">E3</text>
      <text x="30" y="100" text-anchor="middle" font-family="monospace" font-size="12">7400</text>
    </g>
    
    <!-- D3 Timing -->
    <g transform="translate(200,0)">
      <use href="#nand" width="60" height="60"/>
      <text x="30" y="85" text-anchor="middle" font-family="monospace" font-size="14">D3</text>
      <text x="30" y="100" text-anchor="middle" font-family="monospace" font-size="12">7400</text>
    </g>
  </g>

  <!-- Right Paddle Collision Circuit -->
  <g transform="translate(100,250)">
    <!-- H2 NAND -->
    <use href="#nand" width="60" height="60"/>
    <text x="30" y="85" text-anchor="middle" font-family="monospace" font-size="14">H2</text>
    <text x="30" y="100" text-anchor="middle" font-family="monospace" font-size="12">7400</text>
    
    <!-- H3 NAND -->
    <g transform="translate(100,0)">
      <use href="#nand" width="60" height="60"/>
      <text x="30" y="85" text-anchor="middle" font-family="monospace" font-size="14">H3</text>
      <text x="30" y="100" text-anchor="middle" font-family="monospace" font-size="12">7400</text>
    </g>
    
    <!-- J3 Timing -->
    <g transform="translate(200,0)">
      <use href="#nand" width="60" height="60"/>
      <text x="30" y="85" text-anchor="middle" font-family="monospace" font-size="14">J3</text>
      <text x="30" y="100" text-anchor="middle" font-family="monospace" font-size="12">7400</text>
    </g>
  </g>

  <!-- Direction Control -->
  <g transform="translate(400,175)">
    <!-- L3 Flip-Flop -->
    <use href="#flipflop" width="80" height="100"/>
    <text x="40" y="130" text-anchor="middle" font-family="monospace" font-size="14">L3</text>
    <text x="40" y="145" text-anchor="middle" font-family="monospace" font-size="12">7474</text>
  </g>

  <!-- Motion Control -->
  <g transform="translate(550,175)">
    <!-- M3 Control -->
    <rect x="0" y="0" width="60" height="80" fill="white" stroke="black" stroke-width="2"/>
    <text x="30" y="100" text-anchor="middle" font-family="monospace" font-size="14">M3</text>
    <text x="30" y="115" text-anchor="middle" font-family="monospace" font-size="12">7402</text>
    
    <!-- N3 Control -->
    <g transform="translate(100,0)">
      <rect x="0" y="0" width="60" height="80" fill="white" stroke="black" stroke-width="2"/>
      <text x="30" y="100" text-anchor="middle" font-family="monospace" font-size="14">N3</text>
      <text x="30" y="115" text-anchor="middle" font-family="monospace" font-size="12">7402</text>
    </g>
  </g>

  <!-- Signal Lines -->
  <!-- Left Paddle Circuit Connections -->
  <path d="M 160 130 L 200 130" fill="none" stroke="black" stroke-width="2"/>
  <path d="M 260 130 L 300 130" fill="none" stroke="black" stroke-width="2"/>
  
  <!-- Right Paddle Circuit Connections -->
  <path d="M 160 280 L 200 280" fill="none" stroke="black" stroke-width="2"/>
  <path d="M 260 280 L 300 280" fill="none" stroke="black" stroke-width="2"/>
  
  <!-- To Direction Control -->
  <path d="M 300 130 L 400 225" fill="none" stroke="black" stroke-width="2"/>
  <path d="M 300 280 L 400 225" fill="none" stroke="black" stroke-width="2"/>
  
  <!-- Direction to Motion Control -->
  <path d="M 480 225 L 550 215" fill="none" stroke="black" stroke-width="2"/>
  <path d="M 610 215 L 650 215" fill="none" stroke="black" stroke-width="2"/>

  <!-- Legend -->
  <g transform="translate(700,50)">
    <rect x="0" y="0" width="250" height="150" fill="white" stroke="black"/>
    <text x="10" y="20" font-size="12">Circuit Components:</text>
    <text x="10" y="40" font-size="12">- E2,E3: Left Paddle Detection</text>
    <text x="10" y="60" font-size="12">- H2,H3: Right Paddle Detection</text>
    <text x="10" y="80" font-size="12">- D3,J3: Collision Timing</text>
    <text x="10" y="100" font-size="12">- L3: Direction Control FF</text>
    <text x="10" y="120" font-size="12">- M3,N3: Motion Control</text>
  </g>
</svg>
